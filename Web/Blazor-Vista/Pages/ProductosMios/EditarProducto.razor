@page "/Productos/Editar/{CodigoProducto}"



<AuthorizeView Roles="Administrador">
    <Authorized Context="AuthenticationState">
        <h3>EDITAR PRODUCTO</h3>

        <EditForm Model="@prod">
            <DataAnnotationsValidator />

            <div class="form-group row">
                <label for="CodigoProducto" class="col-sm-2 col-form-label">
                    Codigo Producto
                </label>
                <div class="col-sm-10">
                    <label for="CodigoProducto" class="col-sm-2 col-form-label">
                        @prod.CodigoProducto
                    </label>
                </div>
            </div>

            <div class="form-group row">
                <label for="Descripcion" class="col-sm-2 col-form-label">
                    Descripcion
                </label>
                <div class="col-sm-10">
                    <InputText id="Descripcion" class="form-control" @bind-Value="prod.Descripcion " />
                    <ValidationMessage For="@(() =>prod.Descripcion )" />

                </div>
            </div>

            <div class="form-group row">
                <label for="Existencia" class="col-sm-2 col-form-label">
                    Existencia
                </label>
                <div class="col-sm-10">
                    <InputNumber id="Existencia" class="form-control" @bind-Value="prod.Existencia " />

                </div>
            </div>

            <div class="form-group row">
                <label for="Precio" class="col-sm-2 col-form-label">
                    Precio
                </label>
                <div class="col-sm-10">
                    <InputNumber id="Precio" class="form-control" @bind-Value="prod.Precio " />

                </div>
            </div>

            <div class="form-group row">
                <label for="Foto" class="col-sm-2 col-form-label">
                    Foto
                </label>
                <div class="col-sm-10">
                    <InputFile OnChange="@SelecionarImagen" />
                    @if (prod.Foto != null)
                    {
                        <img width="250" height="250" src="data:image;base64,@System.Convert.ToBase64String(prod.Foto)" />
                    }
                    else
                    {
                        <img src="@imgURL" width="250" height="250" />

                    }
                </div>
            </div>

            <div class="form-group row">
                <label for="EstadoActivo" class="col-sm-2 col-form-label">
                    Estado Activo
                </label>
                <div class="col-sm-10">
                    <InputCheckbox @bind-Value="prod.EstaActivo" />
                </div>
            </div>

            <div class="form-grpup row">
                <p>
                    <Input type="submit" class="=btn btn-primary" value="Guardar" @onclick="Guardar" />
                    <Input type="submit" class="=btn btn-danger" value="Cancelar" @onclick="Cancelar" />
                    <Input type="submit" class="=btn btn-secondary" value="Eliminar" @onclick="Eliminar" />

                </p>
            </div>
        </EditForm>
    </Authorized>
    <NotAuthorized>
        <h3>NO TIENE PERMITIDO EL ACCESO</h3>
    </NotAuthorized>
</AuthorizeView>